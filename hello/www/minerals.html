<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <title>Killhope App</title>
        
        <script type="text/javascript" src="../plugins/jQuery/jquery-2.1.3.min.js"></script>
        <script type="text/javascript">
			$(document).ready(function() {
				$(".app").css("background-image", "url(\"img/minerals/sphalerite/1.JPG\")");
			});
        </script>

        
    </head>
    <body>
        <script>
        	var minerals;
        	var glossary = {};

        	glossary["lustre"] = "Lustre is the way light interacts with the surface of a crystal, rock, or mineral. The word traces its origins back to the latin lux, meaning 'light', and generally implies radiance, gloss, or brilliance.";
        	glossary["hardness"] = "The degree of hardness is determined by observing the comparative ease or difficulty which which one mineral is scratched by another.";

	        var test = jQuery.getJSON("info/mineralInfo.json", function(data){
	        	console.log("success");
	        	minerals = data.minerals;
	        	for (i = 0; i < minerals.length; i++) { 
    				//alert(minerals[i].name);
    				$('.info_list').append('<li class="mineral_info" onclick="selectMin('+ i + ')">' + minerals[i].name + '</li>');
				}

	        })
	        .fail(function( jqxhr, textStatus, error ) {
    			var err = textStatus + ", " + error;
    			console.log( "Request Failed: " + err );
    		});

	        function selectMin(i){
	        	$("ul").empty();
	        	$('#title_minerals').text(minerals[i].name);
	        	//$('.info_list').append('<li><br><br><br><br><br><br></li>');
	        	$('.info_list').append('<li class="mineral_info_icons"><a href="mineral_images.php"><img src="img/camera_icon.png"></a><a href="mineral_images.php">3D</a></li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold">Formula:</span>' + ' ' + minerals[i].formula + '</li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold">Colour:</span>' + ' ' + minerals[i].stage1.colours + '</li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold">Abundance:</span>' + ' ' + minerals[i].stage1.abundance + '</li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold" id="gloss">Hardness:</span>' + ' ' + minerals[i].stage1.hardness + '</li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold" id="gloss">Lustre:</span>' + ' ' + minerals[i].stage1.lustre + '</li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold">Ore:</span>' + ' ' + minerals[i].stage1.ore + '</li>');
	        	$('.info_list').append('<li class="mineral_info"><span class="bold">Fact:</span>' + ' ' + minerals[i].stage1.fact + '</li>');
	        	$('.info_list').animate({ scrollTop: 0 }, "fast");
	        	
	        }

	        function searchGlossary(term){
	        	return glossary[term];
	        }

	        $(document).on('click','#gloss',function(){
		    	var term = $(this).text().toLowerCase();
		    	term = term.substring(0, term.length - 1);
		    	var definition = searchGlossary(term);
		    	//Create overlay
		    	document.getElementById('glossary_overlay').style.display = 'inline';
		    	document.getElementById('glossary_overlay').style.position='absolute';
				document.getElementById('glossary_overlay').style.top='0';
				document.getElementById('glossary_overlay').style.left='0';
				document.getElementById('glossary_overlay').style.width='100%';
				document.getElementById('glossary_overlay').style.height='100%';
				document.getElementById('glossary_overlay').style.backgroundColor='rgba(0,0,0,0.7)';
				document.getElementById('glossary_overlay').style.zIndex='10';
				//Set word style
				document.getElementById("glossary_word").innerHTML = term;
				document.getElementById('glossary_word').style.position = 'absolute';
				document.getElementById('glossary_word').style.height = '35px';
				document.getElementById('glossary_word').style.width = '160px';
				document.getElementById('glossary_word').style.top = '20px';
				document.getElementById('glossary_word').style.right = '0';
				document.getElementById('glossary_word').style.color = 'white';
				document.getElementById('glossary_word').style.display = 'inline';
				document.getElementById('glossary_word').style.backgroundColor = '#AA341D';
				document.getElementById('glossary_word').style.fontWeight = 'bold';
				document.getElementById('glossary_word').style.padding = '5px';
				document.getElementById('glossary_word').style.fontSize = '34px';
				//Set definition style
				document.getElementById('glossary_definition').innerHTML = definition;
				document.getElementById('glossary_definition').style.position = 'absolute';
				document.getElementById('glossary_definition').style.height = '340px';
				document.getElementById('glossary_definition').style.width = '340px';
				document.getElementById('glossary_definition').style.top = '75px';
				document.getElementById('glossary_definition').style.left = '0';
				document.getElementById('glossary_definition').style.color = 'white';
				document.getElementById('glossary_definition').style.display = 'inline';
				document.getElementById('glossary_definition').style.backgroundColor = '#AA341D';
				document.getElementById('glossary_definition').style.fontSize = '30px';
				document.getElementById('glossary_definition').style.padding = '5px';
				//Set back style
				document.getElementById('glossary_back').innerHTML = 'Back';
				document.getElementById('glossary_back').style.position = 'absolute';
				document.getElementById('glossary_back').style.height = '30px';
				document.getElementById('glossary_back').style.width = '80px';
				document.getElementById('glossary_back').style.bottom = '30px';
				document.getElementById('glossary_back').style.left = '0';
				document.getElementById('glossary_back').style.color = 'white';
				document.getElementById('glossary_back').style.display = 'inline';
				document.getElementById('glossary_back').style.backgroundColor = '#AA341D';
				document.getElementById('glossary_back').style.fontSize = '30px';
				document.getElementById('glossary_back').style.padding = '5px';

				/*document.getElementById('slenderNote').style.display='block';
				document.getElementById('slenderNote').style.width='181px';
				document.getElementById('slenderNote').style.height='257px';
				document.getElementById('slenderNote').style.backgroundImage='url("textures/slender2.jpeg")';
				document.getElementById('slenderNote').style.backgroundSize='100%';*/
		    	//alert(definiton);
			});
			
			//Resets content within glossary
			$(document).on('click','#glossary_back',function(){
				document.getElementById('glossary_overlay').style.display = 'none';
				document.getElementById('glossary_word').style.display = 'none';
				document.getElementById('glossary_definition').style.display = 'none';
				document.getElementById('glossary_back').style.display = 'none';
			});

		</script>
        <div class="app">
        	<div id="glossary_overlay">
					<div id="glossary_word">
					</div>
					<div id="glossary_definition">
					</div>
					<div id="glossary_back">
					</div>
			</div>
        	<div class="content">
				<h2 id='title_minerals' onclick='location.reload()'>Mineral List</h2>
				<ul class="info_list">
			</div>
        </div>
        <!--
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        -->
    </body>
</html>
